"use strict";const s=require("../../../../common/vendor.js"),r={name:"uniDataChecklist",mixins:[s.Vs.mixinDatacom||{}],emits:["input","update:modelValue","change"],props:{mode:{type:String,default:"default"},multiple:{type:Boolean,default:!1},value:{type:[Array,String,Number],default(){return""}},modelValue:{type:[Array,String,Number],default(){return""}},localdata:{type:Array,default(){return[]}},min:{type:[Number,String],default:""},max:{type:[Number,String],default:""},wrap:{type:Boolean,default:!1},icon:{type:String,default:"left"},selectedColor:{type:String,default:""},selectedTextColor:{type:String,default:""},emptyText:{type:String,default:"暂无数据"},disabled:{type:Boolean,default:!1},map:{type:Object,default(){return{text:"text",value:"value"}}}},watch:{localdata:{handler(t){this.range=t,this.dataList=this.getDataList(this.getSelectedValue(t))},deep:!0},mixinDatacomResData(t){this.range=t,this.dataList=this.getDataList(this.getSelectedValue(t))},value(t){this.dataList=this.getDataList(t)},modelValue(t){this.dataList=this.getDataList(t)}},data(){return{dataList:[],range:[],contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"没有更多"},isLocal:!0,styles:{selectedColor:"#ffa265",selectedTextColor:"#666"},isTop:0}},computed:{dataValue(){return this.value===""?this.modelValue:this.modelValue===""?this.value:this.value}},created(){this.localdata&&this.localdata.length!==0?(this.isLocal=!0,this.range=this.localdata,this.dataList=this.getDataList(this.getSelectedValue(this.range))):this.collection&&(this.isLocal=!1,this.loadData())},methods:{loadData(){this.mixinDatacomGet().then(t=>{this.mixinDatacomResData=t.result.data,this.mixinDatacomResData.length===0?(this.isLocal=!1,this.mixinDatacomErrorMessage=this.emptyText):this.isLocal=!0}).catch(t=>{this.mixinDatacomErrorMessage=t.message})},getForm(t="uniForms"){let l=this.$parent,e=l.$options.name;for(;e!==t;){if(l=l.$parent,!l)return!1;e=l.$options.name}return l},change(t){const l=t.detail.value;let e={value:[],data:[]};if(this.multiple)this.range.forEach(a=>{l.includes(a[this.map.value]+"")&&(e.value.push(a[this.map.value]),e.data.push(a))});else{const a=this.range.find(d=>d[this.map.value]+""===l);a&&(e={value:a[this.map.value],data:a})}this.$emit("input",e.value),this.$emit("update:modelValue",e.value),this.$emit("change",{detail:e}),this.multiple?this.dataList=this.getDataList(e.value,!0):this.dataList=this.getDataList(e.value)},getDataList(t){let l=JSON.parse(JSON.stringify(this.range)),e=[];return this.multiple&&(Array.isArray(t)||(t=[])),l.forEach((a,d)=>{if(a.disabled=a.disable||a.disabled||!1,this.multiple)if(t.length>0){let o=t.find(i=>i===a[this.map.value]);a.selected=o!==void 0}else a.selected=!1;else a.selected=t===a[this.map.value];e.push(a)}),this.setRange(e)},setRange(t){let l=t.filter(d=>d.selected),e=Number(this.min)||0,a=Number(this.max)||"";return t.forEach((d,o)=>{this.multiple&&(l.length<=e&&l.find(n=>n[this.map.value]===d[this.map.value])!==void 0&&(d.disabled=!0),l.length>=a&&a!==""&&l.find(n=>n[this.map.value]===d[this.map.value])===void 0&&(d.disabled=!0)),this.setStyles(d,o),t[o]=d}),t},setStyles(t,l){t.styleBackgroud=this.setStyleBackgroud(t),t.styleIcon=this.setStyleIcon(t),t.styleIconText=this.setStyleIconText(t),t.styleRightIcon=this.setStyleRightIcon(t)},getSelectedValue(t){if(!this.multiple)return this.dataValue;let l=[];return t.forEach(e=>{e.selected&&l.push(e[this.map.value])}),this.dataValue.length>0?this.dataValue:l},setStyleBackgroud(t){let l={},e=this.selectedColor?this.selectedColor:"#ffa265";this.selectedColor&&(this.mode!=="list"&&(l["border-color"]=t.selected?e:"#DCDFE6"),this.mode==="tag"&&(l["background-color"]=t.selected?e:"#f5f5f5"));let a="";for(let d in l)a+=`${d}:${l[d]};`;return a},setStyleIcon(t){let l={},e="";if(this.selectedColor){let a=this.selectedColor?this.selectedColor:"#ffa265";l["background-color"]=t.selected?a:"#fff",l["border-color"]=t.selected?a:"#DCDFE6",!t.selected&&t.disabled&&(l["background-color"]="#F2F6FC",l["border-color"]=t.selected?a:"#DCDFE6")}for(let a in l)e+=`${a}:${l[a]};`;return e},setStyleIconText(t){let l={},e="";if(this.selectedColor){let a=this.selectedColor?this.selectedColor:"#ffa265";this.mode==="tag"?l.color=t.selected?this.selectedTextColor?this.selectedTextColor:"#fff":"#666":l.color=t.selected?this.selectedTextColor?this.selectedTextColor:a:"#666",!t.selected&&t.disabled&&(l.color="#999")}for(let a in l)e+=`${a}:${l[a]};`;return e},setStyleRightIcon(t){let l={},e="";this.mode==="list"&&(l["border-color"]=t.selected?this.styles.selectedColor:"#DCDFE6");for(let a in l)e+=`${a}:${l[a]};`;return e}}};Array||s.resolveComponent("uni-load-more")();const h=()=>"../../../uni-load-more/components/uni-load-more/uni-load-more.js";Math||h();function u(t,l,e,a,d,o){return s.e({a:!d.isLocal},d.isLocal?s.e({e:e.multiple},e.multiple?{f:s.f(d.dataList,(i,n,c)=>s.e({a:e.disabled||!!i.disabled,b:i[e.map.value]+"",c:i.selected},e.mode!=="tag"&&e.mode!=="list"||e.mode==="list"&&e.icon==="left"?{d:s.s(i.styleIcon)}:{},{e:s.t(i[e.map.text]),f:s.s(i.styleIconText)},e.mode==="list"&&e.icon==="right"?{g:s.s(i.styleBackgroud)}:{},{h:s.n(i.selected?"is-checked":""),i:s.n(e.disabled||i.disabled?"is-disable":""),j:s.n(n!==0&&e.mode==="list"?"is-list-border":""),k:s.s(i.styleBackgroud),l:n})),g:e.mode!=="tag"&&e.mode!=="list"||e.mode==="list"&&e.icon==="left",h:e.mode==="list"&&e.icon==="right",i:e.mode==="list"&&e.icon==="left"?1:"",j:s.n("is--"+e.mode),k:e.mode==="list"||e.wrap?1:"",l:s.o((...i)=>o.change&&o.change(...i))}:{m:s.f(d.dataList,(i,n,c)=>s.e({a:e.disabled||i.disabled,b:i[e.map.value]+"",c:i.selected},e.mode!=="tag"&&e.mode!=="list"||e.mode==="list"&&e.icon==="left"?{d:s.s(i.styleIcon),e:s.s(i.styleBackgroud)}:{},{f:s.t(i[e.map.text]),g:s.s(i.styleIconText)},e.mode==="list"&&e.icon==="right"?{h:s.s(i.styleRightIcon)}:{},{i:s.n(i.selected?"is-checked":""),j:s.n(e.disabled||i.disabled?"is-disable":""),k:s.n(n!==0&&e.mode==="list"?"is-list-border":""),l:s.s(i.styleBackgroud),m:n})),n:e.mode!=="tag"&&e.mode!=="list"||e.mode==="list"&&e.icon==="left",o:e.mode==="list"&&e.icon==="right",p:e.mode==="list"&&e.icon==="left"?1:"",q:s.n("is--"+e.mode),r:e.mode==="list"?1:"",s:e.wrap?1:"",t:s.o((...i)=>o.change&&o.change(...i))}):s.e({b:!t.mixinDatacomErrorMessage},t.mixinDatacomErrorMessage?{d:s.t(t.mixinDatacomErrorMessage)}:{c:s.p({status:"loading",iconType:"snow",iconSize:18,"content-text":d.contentText})}),{v:d.isTop+"px"})}const f=s._export_sfc(r,[["render",u]]);wx.createComponent(f);
