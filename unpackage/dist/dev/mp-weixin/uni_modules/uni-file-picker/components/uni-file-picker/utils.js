"use strict";const o=require("../../../../common/vendor.js"),s=e=>{const t=e.lastIndexOf("."),n=e.length;return{name:e.substring(0,t),ext:e.substring(t+1,n)}},m=e=>Array.isArray(e)?e:e.replace(/(\[|\])/g,"").split(","),g=(e,t)=>{let n=[],a=[];return!t||t.length===0?{filePaths:n,files:a}:(e.tempFiles.forEach(i=>{const h=s(i.name).ext.toLowerCase();t.indexOf(h)!==-1&&(a.push(i),n.push(i.path))}),a.length!==e.tempFiles.length&&o.index.showToast({title:`当前选择了${e.tempFiles.length}个文件 ，${e.tempFiles.length-a.length} 个文件格式不正确`,icon:"none",duration:5e3}),{filePaths:n,files:a})},r=e=>new Promise((t,n)=>{o.index.getImageInfo({src:e,success(a){t(a)},fail(a){n(a)}})}),u=async(e,t="image")=>{const a=s(e.name).ext.toLowerCase();let i={name:e.name,uuid:e.uuid,extname:a||"",cloudPath:e.cloudPath,fileType:e.fileType,thumbTempFilePath:e.thumbTempFilePath,url:e.path||e.path,size:e.size,image:{},path:e.path,video:{}};if(t==="image"){const l=await r(e.path);delete i.video,i.image.width=l.width,i.image.height=l.height,i.image.location=l.path}else delete i.image;return i};exports.get_extname=m;exports.get_file_data=u;exports.get_files_and_is_max=g;
