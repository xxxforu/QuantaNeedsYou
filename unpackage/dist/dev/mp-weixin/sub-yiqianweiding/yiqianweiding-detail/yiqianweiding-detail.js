"use strict";const e=require("../../common/vendor.js"),s=require("../api/api.js");if(!Array){const l=e.resolveComponent("uni-popup-dialog"),a=e.resolveComponent("uni-popup"),r=e.resolveComponent("interviewDetail");(l+a+r)()}const h=()=>"../../uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog.js",m=()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js",T=()=>"../../components/interviewDetail/interviewDetail.js";Math||(h+m+T)();const w={__name:"yiqianweiding-detail",setup(l){var a=e.ref(),r=e.ref("false");function y(){let t=new Date,o=t.getFullYear(),n=t.getMonth()+1,c=t.getDate();return n<10&&(n=`0${n}`),c<10&&(c=`0${c}`),`${o}-${n}-${c}`}var d=e.ref(),u=0;e.onLoad(t=>{d.value=y(),u=t.id,e.index.getStorageInfo({success:function(o){o.keys.includes("checkIn"+u)?r.value="true":console.log("缓存不存在")}}),console.log(r.value),s.checkInDetail(t.id).then(o=>{console.log(o),a.value=o})});var g="",i=e.ref(),_=e.ref(null);function p(){e.index.request({url:"https://zx.quantacenter.com/recruitment_reception/check-in/deque?interview_id="+u,header:{"content-type":"application/json",Authorization:e.index.getStorageSync("token")}}).then(t=>{i.value=t.data.data,console.log(t.data.data);for(let o=0;o<i.value;o++)i.value[o].currentType==2&&_.value.open();setTimeout(()=>p(),5e3)})}function f(){e.index.setStorage({data:!0,key:"checkIn"+u}),r.value=!0,p(),e.index.scanCode({success(t){console.log(t),g=t.result,s.scanCode({code:g}).then(o=>{e.index.setStorageSync({data:!0,key:"checkIn"+u}),r.value="true",p()})}})}function v(t){console.log(t.currentTarget.dataset.dpmid),s.giveUp({interview_id:u,department_id:t.currentTarget.dataset.dpmid}).then(o=>{console.log(o)})}return(t,o)=>e.e({a:e.o(t.dialogConfirm),b:e.o(t.dialogClose),c:e.p({type:"info",showClose:!1,confirmText:"好的",content:"轮到你啦~请到指定教室里面试"}),d:e.sr(_,"5e7ac6c5-0",{k:"yourTurn"}),e:e.p({type:"dialog"}),f:e.t(e.unref(a).title),g:e.p({detail:e.unref(a),date:e.unref(d)}),h:e.unref(r)=="false"},e.unref(r)=="false"?{i:e.o(f)}:{j:e.f(e.unref(i),(n,c,D)=>e.e({a:e.t(n.departmentName),b:e.t(n.mineNumber),c:e.t(n.currentType==0?"已过号":""),d:e.t(n.currentType==1?"等待中":""),e:e.t(n.currentType==2?"进行中":""),f:e.t(n.currentType==3?"已结束":""),g:e.t(n.waitingNumber),h:e.t(n.currentNumber),i:e.t(n.estimatedTime),j:e.t(n.location),k:n.currentType==0},n.currentType==0?{l:e.o(f)}:n.currentType==3?{}:n.currentType==2?{}:n.currentType==1?{p:e.o(v),q:n.departmentId}:{},{m:n.currentType==3,n:n.currentType==2,o:n.currentType==1}))})}},k=e._export_sfc(w,[["__scopeId","data-v-5e7ac6c5"]]);wx.createPage(k);
