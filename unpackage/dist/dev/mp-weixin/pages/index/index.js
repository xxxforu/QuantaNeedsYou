"use strict";const e=require("../../common/vendor.js"),v=require("../../api/login.js"),h=require("../../api/notice.js");if(!Array){const s=e.resolveComponent("uni-badge"),a=e.resolveComponent("uni-popup-message"),n=e.resolveComponent("uni-popup"),u=e.resolveComponent("uni-popup-dialog");(s+a+n+u)()}const y=()=>"../../uni_modules/uni-badge/components/uni-badge/uni-badge.js",x=()=>"../../uni_modules/uni-popup/components/uni-popup-message/uni-popup-message.js",b=()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js",C=()=>"../../uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog.js";Math||(y+x+b+C)();const T={__name:"index",setup(s){const a=e.getCurrentInstance();if(!a)throw new Error("getCurrentInstance must be called within setup or lifecycle hook.");const n=a.appContext.config.globalProperties.$getStaticFilePath;var u=e.ref(0),t=e.ref(!1),r=e.ref(0),c=e.ref(e.index.getStorageSync("avatarUrl")),l=e.ref(e.index.getStorageSync("userName")),p=e.ref(0);e.onLoad(()=>{e.index.getSystemInfoAsync({success:o=>{u.value=o.statusBarHeight,r.value=e.index.getMenuButtonBoundingClientRect().height}}),h.getUnreadCount().then(o=>{console.log(o),p.value=o.unreadCount})});function m(){e.index.navigateTo({url:"/sub-tajiuzhaoni/message/message"})}e.onShow(()=>{e.index.getStorage({key:"haveEnterTajiuzhaoni",success(o){t.value=o.data,console.log(t.value)}})}),e.ref(null);const g=e.ref(null);var f=e.ref("退出成功！"),i=e.ref("success");function _(o){i.value=o,g.value.open()}function d(){v.logout().then(o=>{console.log(o),e.index.clearStorage(),setTimeout(()=>{e.index.navigateTo({url:"/pages/login/login"})},1500)})}return(o,j)=>e.e({a:e.unref(c),b:e.t(e.unref(l)),c:e.unref(n)("msg.png"),d:e.p({customStyle:{background:"#64B3D4"},text:e.unref(p),absolute:"rightTop",size:"small"}),e:e.o(m),f:e.unref(n)("exit.png"),g:e.o(S=>_("success")),h:e.unref(u)+"px",i:e.unref(t)},e.unref(t)?{j:e.unref(n)("tajiuzhaoni.png"),k:e.unref(n)("back.png")}:{l:e.unref(n)("tajiuzhaoni.png"),m:e.unref(n)("back.png")},{n:e.unref(n)("yiqianweiding.png"),o:e.unref(n)("back.png"),p:e.unref(n)("wodejianli.png"),q:e.unref(n)("back.png"),r:e.unref(u)+e.unref(r)+"px",s:e.p({type:e.unref(i),message:e.unref(f),duration:2e3}),t:e.sr(" message","44ca7ba6-1"),v:e.p({type:"message"}),w:e.o(d),x:e.p({type:e.unref(i),cancelText:"取消",confirmText:"退出",title:"提示",content:"您确认要退出登录吗？"}),y:e.sr(g,"44ca7ba6-3",{k:"alertDialog"}),z:e.p({type:"dialog"})})}};wx.createPage(T);
